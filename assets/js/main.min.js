const menu_hamburguer=document.querySelector(".icon-mobile"),menu=document.querySelector(".header-menu__mobile"),form=document.getElementById("formContato"),toast_container=document.querySelector(".contact-toast"),toast_icon=document.querySelector(".toast-icon"),toast_message=document.querySelector(".toast-message"),button_enviar_form=document.querySelector(".enviar-form"),input_telephone=document.querySelector('input[name="telephone"]'),BASE_URL=window.location.origin;function removeToast(e=3e3){setTimeout(function(){toast_container.style.display="none"},e)}function Toast(e,t){var n,o;"danger"!=e&&"success"!=e||(o=(n="danger"==e)?"success":"danger",toast_container.classList.remove(o),toast_container.classList.add(e),toast_message.innerHTML=t,toast_icon.innerHTML=n?'<i class="fa-solid fa-close"></i>':'<i class="fa-solid fa-check"></i>',toast_container.style.display="flex",removeToast())}async function sendEmail(e){e.preventDefault(),button_enviar_form.innerHTML='<img src="./assets/img/load.svg" alt="Carregando...">',button_enviar_form.disabled=!0;e=new FormData(this),e=JSON.stringify(Object.fromEntries(e));const t=await fetch(BASE_URL+"/api/send_email",{body:e,headers:{"Content-Type":"application/json"},method:"POST"});e=await t.json();button_enviar_form.innerHTML="Enviar",button_enviar_form.disabled=!1,Toast(e.tipo,e.mensagem)}function mask(){let e=this;setTimeout(function(){e.value=maskTel(e.value)},1)}function maskTel(e){return e=(e=(e=e.replace(/\D/g,"")).replace(/^(\d{2})(\d)/g,"($1) $2")).replace(/(\d)(\d{4})$/,"$1-$2")}menu_hamburguer.addEventListener("click",()=>{menu.classList.toggle("header-menu__mobile--active")?menu_hamburguer.setAttribute("src","assets/img/icons/close.svg"):menu_hamburguer.setAttribute("src","assets/img/icons/menu.svg")}),input_telephone.addEventListener("keyup",mask),form.addEventListener("submit",sendEmail);
const languageToggle=document.querySelector(".switch-button-checkbox"),getTransitionElements=()=>[...document.querySelectorAll(".header-menu__mobile a"),...document.querySelectorAll(".introduction-hello, .introduction-job, .introduction-welcome"),...document.querySelectorAll(".titulo h2"),...document.querySelectorAll(".projects-cards .projects-card__item p"),...document.querySelectorAll(".projects-mais"),...document.querySelectorAll("#contact .titulo h2"),...document.querySelectorAll("#contact label"),...document.querySelectorAll("#contact input, #contact textarea"),...document.querySelectorAll(".enviar-form")].filter(e=>null!==e),elementsMap={metaData:{title:document.querySelector("title"),description:document.querySelector('meta[name="description"]'),keywords:document.querySelector('meta[name="keywords"]'),author:document.querySelector('meta[name="author"]')},header:{technologies:document.querySelector(".header-menu__mobile li:nth-child(1) a"),projects:document.querySelector(".header-menu__mobile li:nth-child(2) a"),contact:document.querySelector(".header-menu__mobile li:nth-child(3) a")},introduction:{hello:document.querySelector(".introduction-hello"),description:document.querySelector(".introduction-job"),welcome:document.querySelector(".introduction-welcome"),resumeButton:document.querySelector(".introduction-download")},technology:{title1:document.querySelector("#technology .titulo h2")},projects:{title:document.querySelector("#project .titulo h2"),card1Desc:document.querySelector("#project .projects-cards .projects-card__item:nth-child(1) p"),card2Desc:document.querySelector("#project .projects-cards .projects-card__item:nth-child(2) p"),card3Desc:document.querySelector("#project .projects-cards .projects-card__item:nth-child(3) p"),moreLink:document.querySelector("#project .projects-mais")},contact:{title:document.querySelector("#contact .titulo h2"),nameLabel:document.querySelector("#contact label:nth-of-type(1)"),nameInput:document.querySelector('#contact input[name="name"]'),surnameLabel:document.querySelector("#contactlabel:nth-of-type(2)"),surnameInput:document.querySelector('#contact input[name="surname"]'),emailLabel:document.querySelector("#contact label:nth-of-type(3)"),emailInput:document.querySelector('#contact input[name="email"]'),telephoneLabel:document.querySelector("#contact label:nth-of-type(4)"),telephoneInput:document.querySelector('#contact input[name="telephone"]'),messageLabel:document.querySelector("#contact label:nth-of-type(5)"),messageInput:document.querySelector('#contact textarea[name="message"]'),submitButton:document.querySelector("#contact .enviar-form")}};function addTransitionClasses(){const e=getTransitionElements();e.forEach(e=>{e.classList.add("language-transition")})}function fadeOutElements(){const e=getTransitionElements();e.forEach(e=>{e.classList.add("fade-out")})}function fadeInElements(){const e=getTransitionElements();e.forEach(e=>{e.classList.remove("fade-out"),e.classList.add("fade-in")})}function removeTransitionClasses(){const e=getTransitionElements();e.forEach(e=>{e.classList.remove("language-transition","fade-out","fade-in")})}function setHeaderTexts(e){elementsMap.header.technologies&&elementsMap.header.projects&&elementsMap.header.contact&&(elementsMap.header.technologies.textContent=e.header.technologies,elementsMap.header.projects.textContent=e.header.projects,elementsMap.header.contact.textContent=e.header.contact)}function setIntroductionTexts(e){elementsMap.introduction.hello&&elementsMap.introduction.description&&elementsMap.introduction.welcome&&elementsMap.introduction.resumeButton&&(elementsMap.introduction.hello.textContent=e.introduction.hello,elementsMap.introduction.description.textContent=e.introduction.description,elementsMap.introduction.welcome.textContent=e.introduction.welcome,elementsMap.introduction.resumeButton.childNodes[0].nodeValue=e.introduction.resume+" ")}function setTechnologyTexts(e){elementsMap.technology.title1&&(e.technology.title_1,e.technology.title_2,elementsMap.technology.title1.innerHTML=`${e.technology.title_1} <span>${e.technology.title_2}</span>`)}function setProjectsTexts(e,t){elementsMap.projects.title&&(elementsMap.projects.title.innerHTML=`${e.projects.title_1} <span>${e.projects.title_2}</span>`,elementsMap.projects.card1Desc&&(elementsMap.projects.card1Desc.textContent=e.projects.project_description_1),elementsMap.projects.card2Desc&&(elementsMap.projects.card2Desc.textContent=e.projects.project_description_2),elementsMap.projects.card3Desc&&(elementsMap.projects.card3Desc.textContent=e.projects.project_description_3),elementsMap.projects.moreLink&&(elementsMap.projects.moreLink.textContent="en.json"===t?"More Projects":"Outros Projetos"))}function setContactTexts(e,t){elementsMap.contact.title&&(console.log(e),elementsMap.contact.title.innerHTML=`${e.contact.title_1}<span>${e.contact.title_2}</span>`,elementsMap.contact.nameLabel&&(elementsMap.contact.nameLabel.childNodes[0].nodeValue=e.contact.name.label+" *"),elementsMap.contact.nameInput&&(elementsMap.contact.nameInput.placeholder=e.contact.name.placeholder),elementsMap.contact.surnameLabel&&(elementsMap.contact.surnameLabel.childNodes[0].nodeValue=e.contact.surname.label),elementsMap.contact.surnameInput&&(elementsMap.contact.surnameInput.placeholder=e.contact.surname.placeholder),elementsMap.contact.emailLabel&&(elementsMap.contact.emailLabel.childNodes[0].nodeValue=e.contact.email.label+" *"),elementsMap.contact.emailInput&&(elementsMap.contact.emailInput.placeholder=e.contact.email.placeholder),elementsMap.contact.telephoneLabel&&(elementsMap.contact.telephoneLabel.childNodes[0].nodeValue=e.contact.telephone.label),elementsMap.contact.messageLabel&&(elementsMap.contact.messageLabel.childNodes[0].nodeValue=e.contact.message.label+" *"),elementsMap.contact.messageInput&&(elementsMap.contact.messageInput.placeholder=e.contact.message.placeholder),elementsMap.contact.submitButton&&(elementsMap.contact.submitButton.textContent=e.contact.submit))}function setMetaAndTitle(e,t){const n=document.documentElement;n.setAttribute("lang","en.json"===e?"en":"pt-br"),t&&t.metaData&&(elementsMap.metaData.title&&(title.textContent=t.metaData.title),elementsMap.metaData.description&&descriptionMeta.setAttribute("content",t.metaData.description),elementsMap.metaData.keywords&&keywordsMeta.setAttribute("content",t.metaData.keywords),elementsMap.metaData.author&&authorMeta.setAttribute("content",t.metaData.author))}function updateDownloadLink(e){const t=document.querySelector(".introduction-download");t&&t.setAttribute("href","en.json"===e?"assets/download/CV_EN.pdf":"assets/download/CV_PT.pdf")}async function applyLanguage(e){addTransitionClasses(),fadeOutElements(),await new Promise(e=>setTimeout(e,300));const t=await fetch("language/"+e);var n=await t.json();setHeaderTexts(n),setIntroductionTexts(n),setTechnologyTexts(n),setProjectsTexts(n,e),setContactTexts(n,e),setMetaAndTitle(e,n),updateDownloadLink(e),fadeInElements(),setTimeout(()=>{removeTransitionClasses()},300)}async function initLanguageToggle(){if(languageToggle){var e=localStorage.getItem("site_lang"),e=(console.log(e),"en.json"===e),t=e?"en.json":"pt.json",e=(languageToggle.checked=e,"language/"+t);const n=await fetch(e);e=await n.json();setHeaderTexts(e),setIntroductionTexts(e),setTechnologyTexts(e),setProjectsTexts(e,t),setContactTexts(e,t),setMetaAndTitle(t,e),updateDownloadLink(t),languageToggle.addEventListener("change",function(){var e=this.checked?"en.json":"pt.json";localStorage.setItem("site_lang",e),applyLanguage(e)})}}document.addEventListener("DOMContentLoaded",initLanguageToggle);